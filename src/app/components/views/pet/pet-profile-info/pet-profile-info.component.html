<div class="">
  <!-- Header Info -->
  <div class="box mr-2 pb-4 col-8 d-flex align-items-center border-bottom">
    
    <div class="mt-4">
      <div class="img-container">
        <img src="../assets/img/image-not-found.png" class="img">
      </div>
    </div>

    <div class="info mt-4">
      <h5>{{pet.name | titlecase}}
        <span *ngIf="!pet.is_adopted; else adopted" class="badge">EN ADOPCIÓN</span>
        <ng-template #adopted>
          <span class="badge text-secondary">ADOPTADO</span>
        </ng-template>
      </h5>

      <div class="d-flex align-items-center">
        <i class='bx bxs-map'></i>
        <a href="#" class="text-secondary" target="_blank">
          {{pet.street}} {{pet.number}}, 
          {{pet.city}}, 
          {{pet.state}} 
        </a>
      </div>
    </div> 
  </div>

  <!-- Contact Owner Section -->
  <div>
    <app-contact-owner [pet]="pet"></app-contact-owner>
  </div>
  
  <!-- Aditional Info -->
  <div class="mb-4 mt-4">
    <p class="text-secondary">{{pet.bio}}</p>
    <p class="text-secondary">#{{pet.petType | titlecase}}, #{{pet.breed | titlecase}}</p>
  </div>
   
  <div class="row col-8 mb-3">
    <!-- Sexo -->
    <div class="square-box d-flex flex-column justify-content-center">
      <h5>Sexo</h5>
      <p *ngIf="!pet.sex; else female"><i class='bx bx-male-sign'></i></p>

      <ng-template #female>
        <p><i class='bx bx-female-sign'></i></p>
      </ng-template> 
    </div>

    <!-- Edad -->
    <div class="square-box d-flex flex-column align-items-center">
      <h5>Edad</h5>
      <p *ngIf="pet.age; else puppy">Adulto</p>
      <ng-template #puppy>
        <p>Cachorro</p>  
      </ng-template>
    </div>

    <!-- Peso -->
    <div class="square-box d-flex flex-column align-items-center">
      <h5>Peso</h5>
      <p>{{pet.weight}}</p>
    </div>
  </div>
  
  <!-- Ficha Médica -->
  <form autocomplete="off" class="row col-8">
    <h6 class="pt-3 ml-3">Ficha Médica</h6>

    <!-- Treatments -->
    <div class="row col-12 pt-3" *ngFor="let t of treatments.$values">
      <p class="col-8">{{t.treatmentLabel}}</p>
      <p class="col-4">{{t.aplicationDate | date }}</p>
    </div>
    
    <!-- Add Treatment group input -->
    <div class="row col-12">
      <!-- Treatment Label -->
      <mat-form-field appearance="standard" class="col-8">
        <mat-label>Tratamiento</mat-label>
        <input matInput type="text" [(ngModel)]="treatmentLabel" [ngModelOptions]="{standalone: true}" placeholder="antipulgas">
      </mat-form-field>

      <!-- Treatment Date Aplication -->
      <mat-form-field appearance="standard" class="col-3">
        <mat-label>Aplicación</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="treatmentDate" [ngModelOptions]="{standalone: true}">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <!-- Treatment btn add -->
      <button class="col-1" type="submit" (click)="saveTreatment(id)">
        <i class='bx bx-plus btn-add'></i>
      </button>
    </div>

    <!-- Vacines -->
    <div class="row col-12 pt-3" *ngFor="let v of vacines.$values">
      <p class="col-4">{{v.vacineLabel}}</p>
      <p class="col-4">{{v.aplicationPlace}}</p>
      <p class="col-4">{{v.aplicationDate | date }}</p>
    </div>

    <!-- Add Vacines group input -->
    <div class="row col-12">
      <!-- Treatment Label -->
      <mat-form-field appearance="standard" class="col-4">
        <mat-label>Vacunas</mat-label>
        <input matInput type="text" [(ngModel)]="vacineLabel" [ngModelOptions]="{standalone: true}" placeholder="Antirábica">
      </mat-form-field>

      <mat-form-field appearance="standard" class="col-4">
        <mat-label>Lugar de aplicación</mat-label>
        <input matInput type="text" [(ngModel)]="vacinePlaceAplication" [ngModelOptions]="{standalone: true}" placeholder="Refugio o veterinaria">
      </mat-form-field>

      <!-- Treatment Date Aplication -->
      <mat-form-field appearance="standard" class="col-3">
        <mat-label>Aplicación</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="vacineDate" [ngModelOptions]="{standalone: true}">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <!-- Treatment btn add -->
      <button class="col-1" type="submit">
        <i class='bx bx-plus btn-add'></i>
      </button>
    </div>
  </form>

  <!-- Editar Perfil Btn -->
  <div class="mt-3">
    <button class="btn2 mb-4 col-6" (click)="goToEditPet(id)">
      Editar Perfil
    </button>
  </div>
</div>
